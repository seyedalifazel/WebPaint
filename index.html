<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Paint</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-3.2.1.min.js"></script>
</head>
<body>
<div class="container-fluid">
    <div class="hidden-xs visible-lg visible-md margin-top">
        <div class="packLg">
            <div class="btn-list">
                <button class="colorBtn black" onclick="setColor('black')"></button>
                <button class="colorBtn red" onclick="setColor('red')"></button>
                <button class="colorBtn green" onclick="setColor('green')"></button>
                <button class="colorBtn blue" onclick="setColor('blue')"></button>
                <button class="colorBtn yellow" onclick="setColor('yellow')"></button>
                <button class="colorBtn pink" onclick="setColor('hotpink')"></button>
            </div>
            <canvas id="canvasPaintLg" width="1200" height="600"></canvas>
        </div>
    </div>
    <div class="hidden-sm visible-xs">
        <button class="colorBtn red" onclick="setColor('red')"></button>
        <button class="colorBtn red" onclick="setColor('blue')"></button>
        <canvas id="canvasPaintSm" width="280" height="500"></canvas>
    </div>
</div>
<script>
    context = document.getElementById("canvasPaintLg").getContext("2d");
    //vaziyate naghashi
    var paint;
    var colorPick="#00ff00";

    $('#canvasPaintLg').mousedown(function (e) {
        paint = true;
        addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);
        redrawLg();
    });

    $('#canvasPaintLg').mousemove(function (e) {
        if (paint) {
            addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop, true);
            redrawLg();
        }
    });

    $('#canvasPaintLg').mouseup(function (e) {
        paint = false;
    });

    $('#canvasPaintLg').mouseleave(function (e) {
        paint = false;
    });
    var clickXlg = new Array();
    var clickYlg = new Array();
    var clickDraglg = new Array();
    var colorLg=new Array();
    function addClick(x, y, dragging) {
        clickXlg.push(x);
        clickYlg.push(y);
        clickDraglg.push(dragging);
        colorLg.push(colorPick);
    }

    function redrawLg() {
        context.clearRect(0, 0, context.canvas.width, context.canvas.height); // Clears the canvas
        context.lineJoin = "round";
        context.lineWidth = 5;

        for (var i = 0; i < clickXlg.length; i++) {
            context.beginPath();
            if (clickDraglg[i] && i) {
                context.moveTo(clickXlg[i - 1], clickYlg[i - 1]);
            } else {
                context.moveTo(clickXlg[i] - 1, clickYlg[i]);
            }
            context.lineTo(clickXlg[i], clickYlg[i]);
            context.strokeStyle=colorLg[i];
            context.closePath();
            context.stroke();
        }
    }
    //for sm view
    contextSm = document.getElementById("canvasPaintSm").getContext("2d");
    $('#canvasPaintSm').mousedown(function (e) {
        paint = true;
        addClickSm(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);

        redraw();
    });

    $('#canvasPaintSm').mousemove(function (e) {
        if (paint) {
            addClickSm(e.pageX - this.offsetLeft, e.pageY - this.offsetTop, true);
            redraw();
        }
    });

    $('#canvasPaintSm').mouseup(function (e) {
        paint = false;
    });

    $('#canvasPaintSm').mouseleave(function (e) {
        paint = false;
    });
    var clickX = new Array();
    var clickY = new Array();
    var clickDrag = new Array();
    var color=new Array();

    function addClickSm(x, y, dragging) {
        clickX.push(x);
        clickY.push(y);
        clickDrag.push(dragging);
        color.push(getColor());
    }

    function redraw() {
        contextSm.clearRect(0, 0, context.canvas.width, context.canvas.height); // Clears the canvas

        contextSm.strokeStyle = "#df4b26";
        contextSm.lineJoin = "round";
        contextSm.lineWidth = 5;

        for (var i = 0; i < clickX.length; i++) {
            contextSm.beginPath();
            if (clickDrag[i] && i) {
                contextSm.moveTo(clickX[i - 1], clickY[i - 1]);
            } else {
                contextSm.moveTo(clickX[i] - 1, clickY[i]);
            }
            contextSm.lineTo(clickX[i], clickY[i]);
            contextSm.strokeStyle=color[i];
            contextSm.closePath();
            contextSm.stroke();
        }
    }
    function setColor(colors) {
        alert("111");
        colorPick=colors;
    }
</script>
<script src="js/bootstrap.min.js"></script>
</body>
</html>